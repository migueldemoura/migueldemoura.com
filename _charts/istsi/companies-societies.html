<body>
  <script src="../../node_modules/chart.js/dist/Chart.js"></script>
  <script src="../../node_modules/file-saver/FileSaver.js"></script>
  <canvas id="canvas" width="1220"></canvas>
  <script>
    let color = Chart.helpers.color;
    let backgroundColors = [
      color('rgb(78,52,46)').rgbString(),
      color('rgb(173,20,87)').rgbString(),
      color('rgb(255,143,0)').rgbString(),
      color('rgb(40,53,147)').rgbString(),
      color('rgb(216,67,21)').rgbString(),
      color('rgb(0,131,143)').rgbString(),
      color('rgb(21,101,192)').rgbString(),
      color('rgb(69,39,160)').rgbString(),
      color('rgb(0,105,92)').rgbString(),
      color('rgb(249,168,37)').rgbString(),
      color('rgb(198,40,40)').rgbString(),
      color('rgb(158,157,36)').rgbString(),
      color('rgb(55,71,79)').rgbString(),
    ];

    new Chart(document.getElementById('canvas').getContext('2d'), {
      type: 'pie',
      data: {
        labels: ['AeroTéc', 'Fórum Mecânica', 'NAEN', 'NEB', 'NEBM', 'NEEA', 'NEECIST', 'NEEGI', 'NEIIST', 'NEMAT',
          'NEQ', 'NFIST', 'NUMIST'
        ],
        datasets: [{
            label: '2015',
            data: [3, 4, 5, 19, 9, 3, 30, 4, 2, 5, 11, 14, 2],
            backgroundColor: backgroundColors,
            borderWidth: 1
          },
          {
            label: '2016',
            data: [0, 10, 0, 25, 9, 2, 22, 0, 4, 5, 9, 9, 1],
            backgroundColor: backgroundColors,
            borderWidth: 1
          },
          {
            label: '2017',
            data: [0, 19, 0, 18, 0, 0, 16, 0, 2, 0, 9, 4, 0],
            backgroundColor: backgroundColors,
            borderWidth: 1
          }
        ]
      },
      options: {
        maintainAspectRatio: false,
        title: {
          display: true,
          text: 'Companies per Society per Year'
        }
      },
      plugins: [{
        beforeInit: function(chart, options) {
          chart.legend.afterFit = function() {
            this.height = this.height - 100;
          };
        }
      }]
    });

    function save() {
      document.getElementById('canvas').toBlob(function(blob) {
        saveAs(blob, 'companies-societies.png');
      });
    }
  </script>
</body>
