{% if page.extra.thumb_image %}
    {% set thumb_image = page.extra.thumb_image %}
{% else %}
    {% set thumb_image = "images/self.jpg" %}
{% endif %}
{% if page.title %}
    {% set title = config.title ~ " - " ~ page.title %}
{% else %}
    {% set title = config.title ~ " - Software Engineer" %}
{% endif %}
{% if page.description %}
    {% set description = page.description %}
{% else %}
    {% set description = "Miguel de Moura. Software Engineer on the Challenges and Turnstile team at Cloudflare. Passionate about Security & Privacy" %}
{% endif %}
{% if page.permalink %}
    {% set permalink = page.permalink %}
{% else %}
    {% set permalink = get_url(path="/") | safe %}
{% endif %}

<head>
    <meta charset="utf-8">
    <title>{{ title | safe }}</title>
    <meta name="description" content="{{ description | safe }}">
    <meta name="author" content="{{ config.title }}">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <meta name="turbolinks-cache-control" content="no-cache">

    <meta property="og:title" content="{{ title | safe }}">
    <meta property="og:url" content="{{ permalink | trim_end_matches(pat="/") | safe }}">
    <meta property="og:description" content="{{ description | safe }}">
    <meta property="og:site_name" content="{{ config.title }}">
    <meta property="og:image" content="{{ get_url(path=thumb_image) }}">

    {%- if permalink is containing("/posts/") %}
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="{{ page.date }}">
    <meta property="article:author" content="{{ config.title }}">
    {% else %}
    <meta property="og:type" content="website">
    {% endif %}

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@{{ config.extra.x }}">
    <meta name="twitter:creator" content="@{{ config.extra.x }}">

    <link rel="canonical" href="{{ permalink | trim_end_matches(pat="/") | safe }}">

    <link rel="apple-touch-icon" href="{{ get_url(path='images/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ get_url(path='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ get_url(path='images/favicon-16x16.png') }}">

    <link href="{{ get_url(path='feed.xml') }}" type="application/rss+xml" rel="alternate">

    <link rel="stylesheet" href="{{ get_url(path='main.css') }}">
    <script src="{{ get_url(path='main.js') }}" defer data-turbolinks-track="reload"></script>
</head>
